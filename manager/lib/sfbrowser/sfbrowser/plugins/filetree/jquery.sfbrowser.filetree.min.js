(function(e){var f;var g;var l;var a;var i;var k;var j=120;e.fn.extend(e.sfbrowser,{filetree:function(m){f=m.trace;g=m.openDir;l=m.aPath;i=m.oTree;a=m.oSettings;k=m.mSfb;e("#fbtable").before('<div id="filetree"><div></div><ul></ul></div>').before('<div id="divider"></div>').css({width:"60%",borderLeftWidth:"0px"});e("#filetree").css({height:e("#fbtable").height()+"px"});e("#divider").attr("title",a.lang.dragMe).mousedown(function(n){e("body").mousemove(c);e("body").mouseup(function(){e("body").unbind("mousemove");e("body").unbind("mouseup")})})}});e.extend(e.sfbrowser.filetree,{resizeWindow:function(p,o){var o=e("#fbtable").height();var n=e("div#winbrowser").width();var m=j/n*100;var q=(n-j-12)/n*100;e("#filetree").css({width:m+"%",height:o+"px"});e("#fbtable").css({width:q+"%"});e("#divider").css({height:(o+4)+"px"})},listAdd:function(m){if(m.mime=="folder"){h(m.file)}else{if(m.mime=="folderup"){m.tr.remove()}}},openDir:function(m){h()}});function h(n){var p=e("#filetree>ul");var o=null;e.each(l,function(r,s){var q=r==0?"root":s.replace(/\//gi,"");o=b(p,q,s);p=e(o.find("ul")[0])});e("#filetree strong.selected").removeClass("selected");o.find(">strong").addClass("selected");if(n){var m=n.replace(/\//gi,"");o=b(p,m)}}function b(q,n,p){var o=null;var m=q.find("li#"+n);if(m.length==0){o=e('<li id="'+n+'"><strong>'+n+"</strong><ul></ul></li>").appendTo(q);o.find("strong").mouseover(function(){e(this).addClass("over")}).mouseout(function(){e(this).removeClass("over")}).click(function(r){d(r,p?p:n)})}else{o=e(m[0])}return o}function d(q,p){var o=e(q.target).parent();var n=[o.attr("id")];while(o.parent().parent().get(0).nodeName=="LI"){o=o.parent().parent();n.push(o.attr("id"))}n.reverse();n[0]=l[0];while(l.length>0){l.pop()}for(var m=0;m<(n.length-1);m++){l.push(n[m]+(m>0?"/":""))}g(n[n.length-1]+"/")}function c(m){j=Math.min(e("div#winbrowser").width()-100,Math.max(50,m.pageX-10-e("#fbwin").offset().left));e.sfbrowser.filetree.resizeWindow(0,0)}})(jQuery);